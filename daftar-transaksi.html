<!DOCTYPE html>
<html lang="id" data-bs-theme="light">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Daftar Transaksi</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Playfair+Display:700,900&display=swap" rel="stylesheet">

<style>
body {
  font-family: "Playfair Display", serif;
}

h2 {
  font-size: clamp(1.4rem, 2.5vw, 2rem);
}

.card-body {
  padding: 2.5rem;
}

@media (max-width: 576px) {
  .card-body {
    padding: 1.5rem;
  }

  table {
    font-size: 0.85rem;
  }
}
</style>
</head>

<body class="bg-body-tertiary">

<div class="container py-4 py-md-5">

  <div class="row justify-content-center">
    <div class="col-12 col-lg-10">

      <div class="card shadow-lg rounded-4">
        <div class="card-body">

          <h2 class="text-center mb-4">Daftar Transaksi Peminjaman Buku</h2>

          <div class="table-responsive">
            <table class="table table-bordered table-striped align-middle text-center">
              <thead class="table-dark">
                <tr>
                  <th>No</th>
                  <th>Nama Peminjam</th>
                  <th>Judul Buku</th>
                  <th>Tanggal Pinjam</th>
                  <th>Tanggal Kembali</th>
                  <th>Status</th>
                </tr>
              </thead>

              <tbody id="tabelTransaksi">
                <!-- DATA DARI JS -->
              </tbody>
            </table>
          </div>

          <div class="d-grid gap-2 d-md-flex justify-content-between mt-4">
            <a href="transaksi.html" class="btn btn-secondary">
              Kembali ke Transaksi
            </a>

            <a href="beranda.html" class="btn btn-outline-primary">
              Kembali ke Beranda
            </a>
          </div>

        </div>
      </div>

    </div>
  </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
const tbody = document.getElementById("tabelTransaksi");
const data = JSON.parse(localStorage.getItem("transaksi")) || [];
const today = new Date().toISOString().split("T")[0];

if (data.length === 0) {
  tbody.innerHTML = `
    <tr>
      <td colspan="6" class="text-muted">Belum ada transaksi</td>
    </tr>
  `;
}

data.forEach((t, i) => {
  let statusBadge;

  if (today > t.tglKembali) {
    statusBadge = `<span class="badge bg-danger">Terlambat</span>`;
  } else {
    statusBadge = `<span class="badge bg-warning text-dark">Dipinjam</span>`;
  }

  tbody.innerHTML += `
    <tr>
      <td>${i + 1}</td>
      <td>${t.nama}</td>
      <td>${t.buku}</td>
      <td>${t.tglPinjam}</td>
      <td>${t.tglKembali}</td>
      <td>${statusBadge}</td>
    </tr>
  `;
});
</script>

</body>
</html>
